<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aulas de Inglês: Entendendo 'Shall We'</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117;
            color: #c9d1d9;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 2rem;
            background-color: #161b22;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid #30363d;
        }
        h1, h2, h3 {
            color: #58a6ff;
            font-weight: 700;
        }
        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; margin-top: 1.5rem; }
        h3 { font-size: 1.5rem; margin-top: 1rem; }
        .example-box {
            background-color: #010409;
            border: 1px dashed #30363d;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
        }
        .example-box p {
            margin: 0.5rem 0;
        }
        .highlight {
            color: #ff7b72;
            font-weight: bold;
        }
        .correct-answer {
            color: #56d364;
            font-weight: bold;
        }
        .quiz-option {
            background-color: #21262d;
            color: #c9d1d9;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .quiz-option:hover {
            background-color: #30363d;
        }
        .quiz-option.correct {
            background-color: #1f6431;
            border: 1px solid #56d364;
        }
        .quiz-option.incorrect {
            background-color: #6e272b;
            border: 1px solid #ff7b72;
        }
        .quiz-feedback {
            margin-top: 1rem;
            font-weight: bold;
        }
        .quiz-feedback.correct { color: #56d364; }
        .quiz-feedback.incorrect { color: #ff7b72; }
        .quiz-option:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="p-4">
    <div class="container">
        <h1 class="text-center">Aprenda a Usar 'Shall We'<br>Learn to Use 'Shall We'</h1>
        <p class="text-center text-gray-400 mt-2">Uma das maneiras mais elegantes de fazer uma sugestão em inglês.<br>One of the most elegant ways to make a suggestion in English.</p>

        <!-- --- Basic Rule Section --- -->
        <hr class="border-gray-700 my-8">
        <h2>O que Significa 'Shall We'?<br>What Does 'Shall We' Mean?</h2>
        <p>A expressão <span class="highlight">'shall we'</span> é usada para fazer uma <span class="highlight">sugestão ou convite</span> que inclui você e a(s) pessoa(s) com quem você está falando. É como se estivesse perguntando "Você concorda em fazer isso conosco?".</p>
        <p>The expression <span class="highlight">'shall we'</span> is used to make a <span class="highlight">suggestion or invitation</span> that includes you and the person(s) you are talking to. It's like asking "Do you agree to do this with us?".</p>

        <p class="mt-4">Em português, a tradução mais próxima seria: **"Vamos...?", "Que tal se a gente...?"** ou **"Devíamos...?"**.<br>In Portuguese, the closest translation would be: **"Should we...?", "What if we...?"** or **"Let's...?"**.</p>

        <div class="example-box">
            <h3 class="text-white">Estrutura Simples<br>Simple Structure</h3>
            <p>A estrutura é sempre a mesma: **Shall we + verbo principal?**<br>The structure is always the same: **Shall we + main verb?**</p>
            <p><strong>Example:</strong> "<span class="correct-answer">Shall we go</span> to the cinema?"</p>
            <p>(<span class="correct-answer">Vamos</span> ao cinema? / <span class="correct-answer">Shall we go</span> to the cinema?)</p>
            <p><strong>Example:</strong> "<span class="correct-answer">Shall we dance</span>?"</p>
            <p>(<span class="correct-answer">Devíamos dançar</span>? / <span class="correct-answer">Shall we dance</span>?)</p>
        </div>
        

        <hr class="border-gray-700 my-8">
        <h2>'Shall We' vs. 'Let's'</h2>
        <p>Essa é a parte mais importante para entender! Tanto 'shall we' quanto 'let's' são usados para fazer sugestões, mas a principal diferença é o <span class="highlight">tom e a formalidade</span>.<br>This is the most important part to understand! Both 'shall we' and 'let's' are used to make suggestions, but the main difference is the <span class="highlight">tone and formality</span>.</p>

        <div class="example-box">
            <h3 class="text-white">'Let's...' (Let us...)</h3>
            <p>É mais <span class="highlight">direto e informal</span>. Funciona mais como uma ordem ou uma sugestão firme. É uma declaração, não uma pergunta.<br>It is more <span class="highlight">direct and informal</span>. It functions more like an order or a firm suggestion. It's a statement, not a question.</p>
            <p><strong>Example:</strong> "<span class="correct-answer">Let's go</span> to the park!" (Vamos ao parque!)</p>
        </div>

        <div class="example-box mt-4">
            <h3 class="text-white">'Shall we...'</h3>
            <p>É mais <span class="highlight">educado, suave e formal</span>. É uma pergunta que convida o outro a tomar uma decisão junto com você. É a melhor opção em situações mais formais ou para mostrar polidez.<br>It is more <span class="highlight">polite, soft, and formal</span>. It is a question that invites the other person to make a decision with you. It is the best option in more formal situations or to show politeness.</p>
            <p><strong>Example:</strong> "<span class="correct-answer">Shall we go</span> to the park?" (Que tal irmos ao parque?)</p>
        </div>

        <hr class="border-gray-700 my-8">
        <h2>Em que Situações Usar 'Shall We'?<br>In Which Situations to Use 'Shall We'?</h2>
        <p>Use 'shall we' em situações onde você quer ser mais cortês ou quando precisa de uma resposta dos outros.<br>Use 'shall we' in situations where you want to be more courteous or when you need a response from others.</p>
        <ul class="list-disc list-inside mt-4">
            <li>Em um ambiente de trabalho: "Shall we start the meeting now?" (Devíamos começar a reunião agora?)<br>In a work environment: "Shall we start the meeting now?" (Should we start the meeting now?)</li>
            <li>Para convidar alguém para um encontro: "Shall we have dinner tonight?" (Que tal jantarmos hoje à noite?)<br>To invite someone on a date: "Shall we have dinner tonight?" (What about having dinner tonight?)</li>
            <li>Quando você está com os amigos, mas quer ser educado: "Shall we order some pizza?" (Vamos pedir uma pizza?)<br>When you are with friends but want to be polite: "Shall we order some pizza?" (Should we order some pizza?)</li>
        </ul>

        <hr class="border-gray-700 my-8">
        <h2>'Shall We' como Resposta Curta<br>'Shall We' as a Short Answer</h2>
        <p>Além de ser uma pergunta completa, **'shall we?'** também pode ser usada como uma resposta curta e motivacional. É uma maneira de perguntar se a outra pessoa está pronta para começar algo, de forma educada e sutil.<br>Besides being a full question, **'shall we?'** can also be used as a short, motivational answer. It's a way of asking if the other person is ready to start something, in a polite and subtle way.</p>
        <p>Geralmente, essa forma é usada após um momento de espera ou quando a ação a ser feita já foi mencionada ou é óbvia para ambos.<br>Generally, this form is used after a moment of waiting or when the action to be done has already been mentioned or is obvious to both parties.</p>

        <div class="example-box mt-4">
            <p><strong>Situação:</strong> Você e um amigo acabaram de amarrar os cadarços antes de correr.<br><strong>Situation:</strong> You and a friend have just finished tying your shoelaces before a run.</p>
            <p><strong>Seu amigo diz:</strong> "Okay, I'm ready."<br><strong>Your friend says:</strong> "Okay, I'm ready."</p>
            <p><strong>Você pode responder:</strong> "<span class="correct-answer">Shall we?</span>" (O 'we' subentende 'go', 'run', etc.)<br><strong>You can respond:</strong> "<span class="correct-answer">Shall we?</span>" (The 'we' implies 'go', 'run', etc.)</p>
        </div>
        
        <div class="example-box mt-4">
            <p><strong>Situação:</strong> Você e um colega estão em frente à sala de reuniões.<br><strong>Situation:</strong> You and a colleague are in front of the meeting room.</p>
            <p><strong>Você diz:</strong> "The meeting starts at 10. It's 10 now."<br><strong>You say:</strong> "The meeting starts at 10. It's 10 now."</p>
            <p><strong>Seu colega pode responder:</strong> "<span class="correct-answer">Shall we?</span>"<br><strong>Your colleague can respond:</strong> "<span class="correct-answer">Shall we?</span>"</p>
        </div>

        <div class="example-box mt-4">
            <p><strong>Situação:</strong> Você está prestes a começar uma apresentação.<br><strong>Situation:</strong> You are about to start a presentation.</p>
            <p><strong>Seu colega diz:</strong> "The audience is ready."<br><strong>Your colleague says:</strong> "The audience is ready."</p>
            <p><strong>Você pode responder:</strong> "<span class="correct-answer">Shall we?</span>" (Vamos começar?)<br><strong>You can respond:</strong> "<span class="correct-answer">Shall we?</span>" (Shall we begin?)</p>
        </div>
        
        <div class="example-box mt-4">
            <p><strong>Situação:</strong> Você e seus amigos acabaram de colocar as pipocas e os refrigerantes em frente à TV.<br><strong>Situation:</strong> You and your friends have just set up the popcorn and sodas in front of the TV.</p>
            <p><strong>Seu amigo diz:</strong> "Everything is ready for the movie."<br><strong>Your friend says:</strong> "Everything is ready for the movie."</p>
            <p><strong>Você pode responder:</strong> "<span class="correct-answer">Shall we?</span>" (Vamos assistir?)<br><strong>You can respond:</strong> "<span class="correct-answer">Shall we?</span>" (Shall we watch?)</p>
        </div>

        <div class="example-box mt-4">
            <p><strong>Situação:</strong> Você e seu parceiro estão em um restaurante após o jantar e acabaram de pagar a conta.<br><strong>Situation:</strong> You and your partner are at a restaurant after dinner and have just paid the bill.</p>
            <p><strong>Seu parceiro diz:</strong> "The bill is paid."<br><strong>Your partner says:</strong> "The bill is paid."</p>
            <p><strong>Você pode responder:</strong> "<span class="correct-answer">Shall we?</span>" (Vamos sair?)<br><strong>You can respond:</strong> "<span class="correct-answer">Shall we?</span>" (Shall we leave?)</p>
        </div>
        
        <div class="example-box mt-4">
            <p><strong>Situação:</strong> Você e seu amigo acabaram de montar o tabuleiro para jogar xadrez.<br><strong>Situation:</strong> You and your friend have just set up the chessboard.</p>
            <p><strong>Seu amigo diz:</strong> "The pieces are all set."<br><strong>Your friend says:</strong> "The pieces are all set."</p>
            <p><strong>Você pode responder:</strong> "<span class="correct-answer">Shall we?</span>" (Vamos jogar?)<br><strong>You can respond:</strong> "<span class="correct-answer">Shall we?</span>" (Shall we play?)</p>
        </div>

        <div class="example-box mt-4">
            <p><strong>Situação:</strong> Em um evento formal, a pessoa que vai fazer o brinde pega o microfone.<br><strong>Situation:</strong> At a formal event, the person who will make the toast picks up the microphone.</p>
            <p><strong>Ela diz:</strong> "To a wonderful evening!"<br><strong>She says:</strong> "To a wonderful evening!"</p>
            <p><strong>Você pode responder:</strong> "<span class="correct-answer">Shall we?</span>" (Vamos brindar?)<br><strong>You can respond:</strong> "<span class="correct-answer">Shall we?</span>" (Shall we toast?)</p>
        </div>

        <hr class="border-gray-700 my-8">
        <h2>Usando 'Shall We' como 'Question Tag'<br>Using 'Shall We' as a 'Question Tag'</h2>
        <p>A "question tag" é uma mini-pergunta no final de uma frase. A regra mais importante para o "shall we" é que ele é a "question tag" padrão para qualquer frase que comece com <span class="highlight">**'Let's'**</span>.<br>A "question tag" is a mini-question at the end of a sentence. The most important rule for "shall we" is that it is the standard "question tag" for any sentence that begins with <span class="highlight">**'Let's'**</span>.</p>
        <p>A "question tag" transforma uma sugestão direta em algo mais suave, como se estivesse perguntando <span class="highlight">"você concorda?"</span>.<br>The "question tag" turns a direct suggestion into something softer, as if you were asking <span class="highlight">"do you agree?"</span>.</p>
        <div class="example-box mt-4">
            <p><strong>Example:</strong> "Let's go to the party, <span class="correct-answer">shall we?</span>"</p>
            <p>(Vamos para a festa, <span class="correct-answer">tá bom?</span> / Let's go to the party, <span class="correct-answer">okay?</span>)</p>
        </div>
        <div class="example-box mt-4">
            <p><strong>Example:</strong> "Let's finish this task, <span class="correct-answer">shall we?</span>"</p>
            <p>(Vamos terminar essa tarefa, <span class="correct-answer">ok?</span> / Let's finish this task, <span class="correct-answer">okay?</span>)</p>
        </div>
        <div class="example-box mt-4">
            <p><strong>Example:</strong> "Let's grab a coffee, <span class="correct-answer">shall we?</span>"</p>
            <p>(Vamos pegar um café, <span class="correct-answer">pode ser?</span> / Let's grab a coffee, <span class="correct-answer">shall we?</span>)</p>
        </div>

        <hr class="border-gray-700 my-8">
        <h2>Exercícios para Praticar 🧐<br>Practice Exercises 🧐</h2>
        <div id="quiz-container" class="space-y-6">
            <!-- Quiz questions will be dynamically rendered here -->
        </div>
        <div id="quiz-feedback" class="quiz-feedback hidden"></div>
        <div class="flex justify-center mt-6">
            <button id="next-quiz-btn" class="quiz-option" disabled>Próxima Pergunta / Next Question</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db = null;
        let auth = null;
        let userId = null;
        let isAuthReady = false;

        if (firebaseConfig.apiKey) {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
        }

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                isAuthReady = true;

                const userDocRef = doc(db, `/artifacts/${appId}/users/${userId}/lessons/shall-we-lesson`);
                onSnapshot(userDocRef, (docSnap) => {
                    if (docSnap.exists()) {
                        const data = docSnap.data();
                        console.log("Progress loaded:", data);
                    }
                });
            } else {
                try {
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                        await signInAnonymously(auth);
                    }
                } catch (error) {
                    console.error("Error during authentication:", error);
                }
            }
        });

        const saveProgress = async (lessonPart) => {
            if (!isAuthReady) return;
            try {
                const userDocRef = doc(db, `/artifacts/${appId}/users/${userId}/lessons/shall-we-lesson`);
                await setDoc(userDocRef, { [lessonPart]: true }, { merge: true });
            } catch (error) {
                console.error("Error saving progress:", error);
            }
        };

        const quizQuestions = [
            {
                question_pt: "Qual frase é uma sugestão mais formal e educada?",
                question_en: "Which phrase is a more formal and polite suggestion?",
                options: ["Let's eat now!", "Shall we eat now?"],
                answer: "Shall we eat now?"
            },
            {
                question_pt: "Complete a frase: '______ we go for a walk?'",
                question_en: "Complete the sentence: '______ we go for a walk?'",
                options: ["Let's", "Shall"],
                answer: "Shall"
            },
            {
                question_pt: "O que a frase 'Shall we begin the class?' significa em português?",
                question_en: "What does the phrase 'Shall we begin the class?' mean in Portuguese?",
                options: ["Vamos começar a aula!", "Nós devemos começar a aula?"],
                answer: "Vamos começar a aula!"
            },
            {
                question_pt: "Qual a melhor opção para convidar seu chefe para uma reunião?",
                question_en: "Which is the best option to invite your boss to a meeting?",
                options: ["Let's meet at 3 PM.", "Shall we meet at 3 PM?"],
                answer: "Shall we meet at 3 PM?"
            },
            {
                question_pt: "Qual a diferença de 'Shall we go?' para 'Let's go!'?",
                question_en: "What is the difference between 'Shall we go?' and 'Let's go!'?",
                options: ["'Shall we go?' é uma pergunta e mais formal.", "'Let's go!' é uma pergunta e mais formal."],
                answer: "'Shall we go?' é uma pergunta e mais formal."
            },
            {
                question_pt: "Se um colega de trabalho acabou de chegar no elevador, o que você pode dizer como uma sugestão curta para ir para o andar de vocês?",
                question_en: "If a colleague has just arrived in the elevator, what can you say as a short suggestion to go to your floor?",
                options: ["Let's go?", "Shall we?"],
                answer: "Shall we?"
            },
            {
                question_pt: "Você e seu amigo acabaram de se arrumar para um encontro. Ele diz: 'I'm ready to go.' Qual a melhor resposta curta para motivá-lo a sair?",
                question_en: "You and your friend have just gotten ready for an outing. He says: 'I'm ready to go.' What is the best short answer to motivate him to leave?",
                options: ["Let's go.", "Shall we?"],
                answer: "Shall we?"
            },
            {
                question_pt: "Qual a 'question tag' correta para a frase 'Let's order some pizza'?",
                question_en: "What is the correct 'question tag' for the phrase 'Let's order some pizza'?",
                options: ["do we?", "shall we?", "don't we?"],
                answer: "shall we?"
            }
        ];

        let currentQuestionIndex = 0;
        const quizContainer = document.getElementById('quiz-container');
        const nextQuizBtn = document.getElementById('next-quiz-btn');
        const quizFeedback = document.getElementById('quiz-feedback');
        const userLanguage = navigator.language || navigator.userLanguage;
        const isPortuguese = userLanguage.startsWith('pt');

        function renderQuiz() {
            if (currentQuestionIndex >= quizQuestions.length) {
                quizContainer.innerHTML = `<p class="text-green-400 text-2xl font-bold text-center">Parabéns! Você completou os exercícios! 🎉<br>Congratulations! You completed the exercises! 🎉</p>`;
                nextQuizBtn.style.display = 'none';
                return;
            }

            const currentQuiz = quizQuestions[currentQuestionIndex];
            const questionText = isPortuguese ? currentQuiz.question_pt : currentQuiz.question_en;

            quizContainer.innerHTML = `
                <p class="text-xl font-bold mb-4">${questionText}</p>
                <div class="flex flex-col space-y-4">
                    ${currentQuiz.options.map(option => `
                        <button class="quiz-option" data-answer="${option}">${option}</button>
                    `).join('')}
                </div>
            `;
            quizFeedback.textContent = '';
            quizFeedback.classList.add('hidden');
            nextQuizBtn.disabled = true;
            nextQuizBtn.classList.add('opacity-50');

            document.querySelectorAll('.quiz-option').forEach(button => {
                button.addEventListener('click', handleQuizClick);
            });
        }

        function handleQuizClick(event) {
            const selectedOption = event.currentTarget;
            const selectedAnswer = selectedOption.dataset.answer;
            const correctAnswer = quizQuestions[currentQuestionIndex].answer;
            const feedbackText = isPortuguese ? 'Correto! Boa! ✅' : 'Correct! Well done! ✅';
            const incorrectText = isPortuguese ? 'Incorreto. A resposta correta está destacada em verde. ❌' : 'Incorrect. The correct answer is highlighted in green. ❌';

            document.querySelectorAll('.quiz-option').forEach(button => {
                button.disabled = true;
                if (button.dataset.answer === correctAnswer) {
                    button.classList.add('correct');
                } else {
                    button.classList.add('incorrect');
                }
            });

            if (selectedAnswer === correctAnswer) {
                quizFeedback.textContent = feedbackText;
                quizFeedback.classList.remove('incorrect');
                quizFeedback.classList.add('correct');
                saveProgress(`quiz_question_${currentQuestionIndex + 1}_correct`);
            } else {
                quizFeedback.textContent = incorrectText;
                quizFeedback.classList.remove('correct');
                quizFeedback.classList.add('incorrect');
            }
            quizFeedback.classList.remove('hidden');

            nextQuizBtn.disabled = false;
            nextQuizBtn.classList.remove('opacity-50');
        }

        nextQuizBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            renderQuiz();
        });

        window.onload = () => {
            renderQuiz();
        };
    </script>
</body>
</html>
